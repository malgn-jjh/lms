<script language="javascript" type="text/javascript">initEditor("default");</script>
<script language="javascript" src="/common/js/picker.prototype.js"></script>
<script language="javascript" type="text/javascript" src="/common/js/grid.prototype.js"></script>
<!--[if lt IE 9]><script src="http://cdnjs.cloudflare.com/ajax/libs/es5-shim/2.0.8/es5-shim.min.js"></script><![endif]-->
<script language="javascript" src="/common/js/selectize/selectize.min.js"></script>
<link rel="stylesheet" href="/common/js/selectize/selectize.css">
<style type="text/css">
#targetArea {width:80%; vertical-align:-10px;}
#preview_list_price {text-align:center; text-decoration:line-through; font-size:1.5em; color:#777;}
#preview_price {text-align:center; font-weight:bold; font-size:1.5em; color:#e2450e;}
<!--@nif(modify)-->
.fa-minus:before, .fa-plus:before { display:none; }
<!--/nif(modify)-->
<!--@if(modify)-->
/* .toggle-hide { display:none; } */
<!--/if(modify)-->
</style>
<!--@if(modify)-->
<!--@nif(is_package)--><!--@include(/course/course_tab.html)--><!--/nif(is_package)-->
<!--@if(is_package)--><!--@include(/course/package_tab.html)--><!--/if(is_package)-->
<!--/if(modify)-->

<form name="form1" method="post" target="sysfrm" enctype="multipart/form-data" onsubmit="return goSubmit(this)">
<input type="hidden" name="onoff_type">
<input type="hidden" name="course_type">

<table class="c_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="c_th01"><i class="fa fa-minus toggle"></i> 기초 정보</td>
	<td class="c_td01"></td>
</tr>
</table>

<div class="toggle-area toggle-hide">
<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="150"><col>
<col width="150"><col>
<tr>
	<td class="f_th01">과정 구분 *</td>
	<td class="f_td01" colspan="3">
		<!--@nif(modify)-->
		<label style="display:block; height:20px;">
			<input type="radio" name="type" value="N|A" class="ipt01" onclick="setOnoffType(this.value)" checked="checked"> 온라인 상시과정
			<span class="desc01"> 온라인에서 상시로 수강 가능한 과정입니다.</span>
		</label>
		<label style="display:block; height:20px;">
			<input type="radio" name="type" value="N|R" class="ipt01" onclick="setOnoffType(this.value)"> 온라인 정규과정
			<span class="desc01"> 온라인에서 정해진 기간에 수강 가능한 과정입니다.</span>
		</label>
		<label style="display:block; height:20px;">
			<input type="radio" name="type" value="F|R" class="ipt01" onclick="setOnoffType(this.value)"> 집합 과정
			<span class="desc01"> 오프라인교육이며 정규과정만 선택할 수 있습니다.</span>
		</label>
		<label style="display:block; height:20px;">
			<input type="radio" name="type" value="B|R" class="ipt01" onclick="setOnoffType(this.value)"> 혼합 과정
			<span class="desc01"> 온라인교육과 오프라인교육의 혼합된 형태입니다. 정규과정만 선택할 수 있습니다.</span>
		</label>
		<label style="display:block; height:20px;">
			<input type="radio" name="type" value="P|R" class="ipt01" onclick="setOnoffType(this.value)"> 정규 패키지
			<span class="desc01"> 수강신청기간과 학습기간을 지정한 과정을 선택하는 패키지입니다.</span>
		</label>
		<label style="display:block; height:20px;">
			<input type="radio" name="type" value="P|A" class="ipt01" onclick="setOnoffType(this.value)"> 상시 패키지
			<span class="desc01"> 수강승인일로부터 학습 가능한 학습일수를 지정하는 패키지입니다.</span>
		</label>
		<!--/nif(modify)-->
		<!--@if(modify)-->

		<!--@nif(onoff_type_P)-->
		<!--@if(course_type_A)-->
		온라인 상시과정 <span class="desc01"> 수시로 수강신청 가능한 온라인 과정입니다.</span>
		<!--/if(course_type_A)-->

		<!--@if(onoff_type_N)-->
		<!--@if(course_type_R)-->
		온라인 정규 과정 <span class="desc01"> 수강신청기간과 학습기간이 지정된 온라인 과정입니다.</span>
		<!--/if(course_type_R)-->
		<!--/if(onoff_type_N)-->

		<!--@if(onoff_type_F)-->
		집합과정 <span class="desc01"> 오프라인 정규과정입니다.</span>
		<!--/if(onoff_type_F)-->
		<!--@if(onoff_type_B)-->
		혼합과정 <span class="desc01"> 온라인교육과 오프라인교육이 혼합된 과정입니다.</span>
		<!--/if(onoff_type_B)-->
		<!--/nif(onoff_type_P)-->
		
		<!--@if(onoff_type_P)-->
		<!--@if(course_type_R)-->
		정규 패키지 <span class="desc01"> 수강신청기간과 학습기간을 지정한 과정을 선택하는 패키지입니다.</span>
		<!--/if(course_type_R)-->
		<!--@if(course_type_A)-->
		상시 패키지 <span class="desc01"> 수강승인일로부터 학습 가능한 학습일수를 지정하는 패키지입니다.</span>
		<!--/if(course_type_A)-->
		<!--/if(onoff_type_P)-->

		<!--/if(modify)-->

		<script>
		function setOnoffType(type) {
			if(!type) return;
			var tmp = type.split("|");
			if(tmp.length != 2) return;
			var f = document.forms['form1'];
			f.onoff_type.value = tmp[0];
			f.course_type.value = tmp[1];
			setRequest(tmp[0], tmp[1]);
		}

		function setRequest(onoff_type, course_type) {
			if(!onoff_type) onoff_type = "N";
			if(!course_type) course_type = "A";

			var f = document.forms['form1'];
			$(".cdate").each(function() {
				if(course_type == "R") { //정규
					$(this).removeAttr("disabled");
					$(this).val($(this).attr("_cvalue"));
					$(this).attr("REQUIRED", "true");
					$("#studyDateArea input[type=text]").removeAttr("REQUIRED");
				} else if(course_type == "A") {
					$(this).val("");
					$(this).attr("disabled", "disabled");
					$(this).removeAttr("REQUIRED");
				}
			});
			$(".ldate").each(function() {
				if(course_type == "R") { //정규
					$(this).val("");
					$(this).attr("disabled", "disabled");
					$(this).removeAttr("REQUIRED");
				} else if(course_type == "A") {
					$(this).removeAttr("disabled");
					//$(this).val($(this).attr("_lvalue"));
					$(this).attr("REQUIRED", "true");
				}
			});

			if(course_type == "R") { //정규
				$("#row_lesson").hide();
				$("#row_term").show();
				$("#row_calendar").show();
				$("#row_renew").hide();
			} else if(course_type == "A") {
				$("#row_term").hide();
				$("#row_calendar").hide();
				$("#row_lesson").show();
				$("#row_renew").show();
			}

			if(onoff_type == "P") {
				$("#row_term").hide();
				$("#time").hide();
				$("#studyDateAreaPackage").show();
				$("#studyDateArea").hide();
				$("#mobileArea").hide();
				$("#evaluationArea").hide();
				$("#row_renew").hide();

			} else {
				$("#studyDateAreaPackage").hide();
				$("#studyDateArea").show();
				$("#mobileArea").show();
				$("#evaluationArea").show();
			}
		}
		function setRenew(v) {
			if(!v) $("#renew_price").attr("disabled", "disabled");
			else $("#renew_price").removeAttr("disabled");
		}
		function init() {
			setRequest(GetFormValue("form1", "onoff_type"), GetFormValue("form1", "course_type"));
			setRenew(GetFormValue("form1", "renew_yn"));
		}
		addEvent("onload", init);
		</script>
		
	</td>
</tr>
<tr>
	<td class="f_th01">과정 카테고리 *</td>
	<td class="f_td01" colspan="3">
		<input type="hidden" name="category_id" value="{{category_id}}">
		<input type="text" name="category_nm" size="70" readonly ondblclick="OpenWindows('category_select.jsp?tid={{category_id}}&mode=select', '_SC01', 400, 600);">
		<input type="button" value="카테고리 선택" class="btn_simp" onclick="OpenWindows('category_select.jsp?tid={{category_id}}&mode=select', '_SC01', 400, 600);">
	</td>
</tr>
<tr>
	<td class="f_th01">과정 개설명 *</td>
	<td class="f_td01" colspan="3"><input type="text" name="course_nm" size="70" style="font-weight:bold; color:#4C5BA9"></td>
</tr>
<tr>
	<td class="f_th01">메인 이미지 *</td>
	<td class="f_td01" colspan="3">
		<!--@if(course_file)-->
		<p style="padding-bottom:5px;">파일 : <a href="../main/download_file.jsp?file={{course_file_conv}}&ek={{course_file_ek}}" class="file01 image01" del="course_modify.jsp?mode=fdel&{{query}}" isrc="{{course_file_url}}">{{course_file}}</a></p>
		<!--/if(course_file)-->
		<input type="file" name="course_file" size="70" style="border:1px solid #d1d1d1;">
		<span class="desc01">이미지의 크기는 370×247px을 권장합니다.</span>
	</td>
</tr>
<tr id="row_term" class="hide">
	<td class="f_th01">년도 / 기수 *</td>
	<td class="f_td01" colspan="3">
		<select name="year">
		<!--@loop(years)-->
		<option value="{{years.id}}"> {{years.name}}년도 </option>
		<!--/loop(years)-->
		</select>
		<input type="text" name="step" size="5" style="text-align:center"> 기
		<span class="desc01"> 과정명과 년도, 기수는 중복될 수 없습니다.</span>

		<!--@nif(modify)-->
		<script>
		addEvent("onload", function() { SetFormValue('form1', 'year', '{{year}}')});
		</script>
		<!--/nif(modify)-->
	</td>
</tr>
<tr id="row_calendar" class="hide">
	<td class="f_th01">수강신청기간 *</td>
	<td class="f_td01">
		<span id="requestDateArea" style="display:inline-block;">
			<input type="text" name="request_sdate" size="10" class="cal02 cdate" _cvalue="{{request_sdate}}"> -
			<input type="text" name="request_edate" size="10" class="cal02 cdate" _cvalue="{{request_edate}}">
		</span>
	</td>
	<td class="f_th01">학습기간 *</td>
	<td class="f_td01">
		<span id="studyDateArea" style="display:inline-block;">
			<input type="text" name="study_sdate" size="10" class="cal02 cdate" _cvalue="{{study_sdate}}"> -
			<input type="text" name="study_edate" size="10" class="cal02 cdate" _cvalue="{{study_edate}}">
			<!--@if(modify)-->
			<label for="user_date_yn"><input type="checkbox" id="user_date_yn" name="user_date_yn" class="ipt01" value="Y"> 기존 수강생 학습기간 일괄변경</label>
			<!--/if(modify)-->
		</span>
		<span id="studyDateAreaPackage" class="desc01">별도 설정 없이 과정별 학습기간이 적용됩니다.</span>
	</td>
</tr>
<tr id="row_lesson">
	<td class="f_th01">학습일수 *</td>
	<td class="f_td01" colspan="3">
		<input type="text" name="lesson_day" maxlength="3" size="4" class="ipt_right ldate" _lvalue="{{lesson_day}}"> 일
		<span class="desc01">온라인 상시과정 수강신청시에 자동으로 등록되는 학습 일수입니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">정가 * </td>
	<td class="f_td01">
		<input type="text" id="list_price" name="list_price" size="15" maxlength="8" class="ipt_right" onblur="previewPrice();"> 원
		<span class="desc01"> 할인 전 금액으로, 숨기려면 0을 입력하세요. </span>
	</td>
	<td class="f_th01" rowspan="2">실제 가격표기</td>
	<td class="f_td01" rowspan="2">
		<div id="preview_list_price"></div>
		<div id="preview_price"></div>
	</td>
</tr>
<tr>
	<td class="f_th01">수강료 *</td>
	<td class="f_td01">
		<input type="text" id="price" name="price" size="15" maxlength="8" class="ipt_right" onblur="previewPrice();"> 원
		<span class="desc01"> 할인이 적용된 실결제금액입니다. </span>
	</td>
</tr>
<tr>
	<td class="f_th01">부가세면세여부</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="taxfree_yn" value="Y"></label>
		<span class="desc01">면세여부는 직접 판단하셔야 하며, PG사에 추가 설정이 필요할 수 있습니다.</span>
	</td>
	<td class="f_th01">그룹할인적용여부</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="disc_group_yn" value="Y"></label>
	</td>
</tr>
<!--@nif(is_package)-->
<tr id="row_renew">
	<td class="f_th01">수강기간 연장</td>
	<td class="f_td01" colspan="3">
		<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed; margin:0;">
		<col width="120"><col>
		<col width="120"><col>
		<tr>
			<td class="f_th01">사용여부</td>
			<td class="f_td01" colspan="3">
				<label class="switch01"><input type="checkbox" name="renew_yn" value="Y" onclick="setRenew(this.checked);"></label>
				<span class="fontsmallthin">수강기간 연장결제 사용</span>
				<span class="desc01"> 수강기간이 끝나기 전 추가결제하여 수강기간을 연장하는 기능입니다. </span>
			</td>
		</tr>
		<tr>
			<td class="f_th01">최대 연장횟수</td>
			<td class="f_td01">
				<input type="text" id="renew_max_cnt" name="renew_max_cnt" size="3" maxlength="3" class="ipt_right"> 회
				<span class="desc01"> 무제한으로 설정하시려면 0을 입력하세요. </span>
			</td>
			<td class="f_th01">연장비용</td>
			<td class="f_td01">
				<input type="text" id="renew_price" name="renew_price" size="15" maxlength="8" class="ipt_right"> 원
			</td>
		</tr>
		</table>
	</td>
</tr>
<!--/nif(is_package)-->
<tr id="time">
	<td class="f_th01">학점</td>
	<td class="f_td01">
		<input type="text" name="credit" size="4" class="ipt_right"> 점
		<span class="desc01">과정 이수시 인정되는 학점입니다.</span>	
	</td>
	<td class="f_th01">시수</td>
	<td class="f_td01">
		<input type="text" name="lesson_time" size="5" class="ipt_right" onblur="setDouble(this, 2);"> 시간
		<span class="desc01">과정 이수시 인정되는 시수입니다.</span>
	</td>
</tr>

<!--@if(modify)-->
<tr>
	<td class="f_th01">샘플강의</td>
	<td class="f_td01" colspan="3">
		<input type="hidden" name="sample_lesson_id" value="{{sample_lesson_id}}">
		<input type="text" name="sample_lesson_nm" size="35" readonly ondblclick="OpenWindows('lesson_sample.jsp', '_SC06', 800, 550);">
		<input type="button" value="샘플강의 선택" class="btn_simp" onclick="OpenWindows('lesson_sample.jsp', '_SC06', 800, 550);">
		<input type="button" value="샘플강의 삭제" class="btn_simp" onclick="delSample();">
	</td>
</tr>
<tr>
	<td class="f_th01">
		교재도서
		<div style="margin-top:3px;">
			<input type="button" class="btn_simp" value="교재도서 추가" onclick="OpenWindows('../book/book_select.jsp?mode=course', '_SC03', 800, 550);">
		</div>
	</td>
	<td class="f_td01" colspan="3">
		<div id="bArea" class="picker_name">
			<span class="desc01">교재도서를 추가하세요.</span>
		</div>
	</td>
</tr>
<tr>
	<td class="f_th01">
		담임강사		
		<div style="margin-top:3px;">
			<input type="button" class="btn_simp" value="담임강사 추가" onclick="OpenWindow('../user/tutor_select.jsp?mode=major', '_SC04', 800, 560);">
		</div>
	</td>
	<td class="f_td01" colspan="3">
		<div id="mArea" class="picker_name">
			<span class="desc01">담임강사를 추가하세요.</span>
		</div>
	</td>
</tr>
<!--@nif(online_block)-->
<tr id="address">
	<td class="f_th01">
		교육장 주소
		<input type="button" class="btn_simp" value="검색" onclick="OpenWindow('../main/pop_zipcode.jsp?addr=course_addr&addr_dtl=course_addr_dtl', 'MPZ7', 500, 450)" />
		<input type="button" class="btn_simp" value="삭제" onclick="if(confirm('정말 교육장 주소를 삭제하시겠습니까?')) { document.forms['form1']['course_addr'].value = ''; document.forms['form1']['course_addr_dtl'].value = ''; }" />
	</td>
	<td class="f_td01" colspan="3">
		<!-- <input type="text" name="course_address" size="70"> -->
		<input type="hidden" name="zipcode" value="">
		<input type="text" name="course_addr" size="65" placeholder="교육장 주소" ondblclick="OpenWindow('../main/pop_zipcode.jsp?addr=course_addr&addr_dtl=course_addr_dtl', 'MPZ7', 500, 450)"  readonly="readonly">
		<input type="text" name="course_addr_dtl" size="65" placeholder="상세주소">
	</td>
</tr>
<!--/nif(online_block)-->
<!--/if(modify)-->
<tr>
	<td class="f_th01">주문메모 사용여부</td>
	<td class="f_td01" colspan="3">
		<label class="switch01"><input type="checkbox" name="memo_yn" value="Y"></label>
		<span class="desc01">주문 시 회원이 별도의 요청사항을 메모할 수 있도록 합니다.</span>
	</td>
</tr>
<!--@nif(is_package)-->
<tr id="mobileArea">
	<td class="f_th01">모바일 지원</td>
	<td class="f_td01" colspan="3">
		<label class="switch01"><input type="checkbox" name="mobile_yn" value="Y"></label>
		<span class="desc01">모바일 기기에서도 학습을 지원합니다.</span>
	</td>
</tr>
<!--/nif(is_package)-->
<!--@if(modify)-->
<tr>
	<td class="f_th01">판매여부</td>
	<td class="f_td01" colspan="3">
		<label class="switch01"><input type="checkbox" name="sale_yn" value="Y"></label>
		<span class="desc01">과정의 판매여부를 결정합니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">노출여부</td>
	<td class="f_td01" colspan="3">
		<label class="switch01"><input type="checkbox" name="display_yn" value="Y"></label>
		<span class="desc01">과정목록에 노출될지의 여부를 결정합니다. <strong>목록에 노출하지 않아도 과정소개 페이지 접근은 가능합니다.</strong></span>
	</td>
</tr>
<tr>
	<td class="f_th01">상태</td>
	<td class="f_td01" colspan="3">
		<label class="switch01"><input type="checkbox" name="status" value="1"></label>
		<span class="desc01">과정의 상태를 결정합니다. 중지시 과정목록, 과정소개 페이지 노출 및 판매가 중지됩니다. 기존 수강생의 수강은 정상적으로 가능합니다.</span>
	</td>
</tr>
<!--/if(modify)-->
</table>
</div>

<table class="c_tb01" cellpadding="0" cellspacing="0" style="margin-top:10px">
<tr>
	<td class="c_th01"><i class="fa fa-plus toggle"></i> 과정 설명</td>
	<td class="c_td01"></td>
</tr>
</table>

<div class="toggle-area toggle-hide">
<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="150"><col>
<tr>
	<td class="f_th01">과정목록 소개문구</td>
	<td class="f_td01">
		<div class="desc01" style="margin:0 0 4px 5px;">사용자가 수강신청을 위해 보는 과정목록에 나타나는 2~3줄의 과정소개문구입니다.</div>
		<textarea name="subtitle" class="NoEditor" style="width:100%;height:40px;" >{{subtitle}}</textarea>
	</td>
</tr>
<tr>
	<td class="f_th01"><input type="text" name="content1_title" size="14"></td>
	<td class="f_td01"><textarea name="content1" style="width:100%;height:250px;" >{{content1}}</textarea></td>
</tr>
<tr>
	<td class="f_th01"><input type="text" name="content2_title" size="14"></td>
	<td class="f_td01"><textarea name="content2" style="width:99%;height:100px;" class="mceNoEditor">{{content2}}</textarea></td>
</tr>
<tr>
	<td class="f_th01">기타 1</td>
	<td class="f_td01"><input type="text" name="etc1" size="120"></td>
</tr>
<tr>
	<td class="f_th01">기타 2</td>
	<td class="f_td01"><input type="text" name="etc2" size="120"></td>
</tr>
<!--@if(modify)-->
<!--
<tr>
	<td class="f_th01">담당자</td>
	<td class="f_td01">
		<select name="manager_id">
		<option value=""> - 담당자 선택 - </option>
		<!--@loop(managers)-->
		<option value="{{managers.id}}">[{{managers.kind_conv}}] {{managers.user_nm}}</option>
		<!--/loop(managers)-->
		</select>
	</td>
</tr>
-->
<!--/if(modify)-->
</table>
</div>

<!--@if(modify)-->
<!--//운영정보-->
<table class="c_tb01" cellpadding="0" cellspacing="0" style="margin-top:10px">
<tr>
	<td class="c_th01"><i class="fa fa-plus toggle"></i> 운영 정보</td>
	<td class="c_td01"></td>
</tr>
</table>

<div class="toggle-area">
<table id="managementTable" class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="150"><col>
<tbody>
<tr>
	<td class="f_th01">추천과정</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="recomm_yn" value="Y"></label>
		<span class="desc01">해당 과정을 추천과정으로 지정합니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">신청즉시 승인 *</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="auto_approve_yn" value="Y"></label>
		<span class="desc01">수강신청을 하는 동시에 즉시 승인합니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">
		수강신청대상 *
		<input type="button" class="btn_simp" value="추가" onclick="OpenWindows('../user/group_select.jsp', '_SC03', 600, 550);">
	</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="target_yn" value="Y" onclick="setTarget();"></label>
		<span id="targetDesc" class="desc01">미사용시 모든 회원이 해당 과정에 수강신청대상이 됩니다.</span>
		<span style="display:none;" id="targetArea">
			<span id="gArea" class="picker_name">
				<span class="desc01">학습대상 그룹을 추가하세요.</span>
			</span>
		</span>
	</td>
</tr>
<!--@nif(is_package)-->
<tr>
	<td class="f_th01">SMS 인증</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="sms_yn" value="Y" <!--@nif(SITE_INFO.sms_yn)--> disabled="disabled"<!--/nif(SITE_INFO.sms_yn)-->></label>
		<span class="desc01">
			수강 시마다 회원정보에 등록된 휴대전화로 SMS 인증을 받습니다.
			<!--@nif(SITE_INFO.sms_yn)-->SMS 서비스를 신청하셔야 이용할 수 있습니다.<!--/nif(SITE_INFO.sms_yn)-->
		</span>
	</td>
</tr>
<tr>
	<td class="f_th01">자동 수료처리 *</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="complete_auto_yn" value="Y"></label>
		<span class="desc01"><strong>평가항목</strong>(시험, 과제, 토론, 기타) 이 있는 경우 <strong>미사용</strong>으로 하시는 것을 권장합니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">복습허용 사용여부</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="restudy_yn" value="Y" onclick="setRestudy(this);"></label>
		<span id="restudyArea" class="fontsmallthin">
			<input type="text" name="restudy_day" size="4" class="ipt_right" _cvalue="{{restudy_day}}" onchange="maxRestudy();"> 일 동안 복습허용
		</span>
		<span class="desc01"> 학습기간 종료후 복습을 허용합니다. 단, 복습기간에는 진도를 체크하지 않습니다. 최대 3,700일까지 설정이 가능합니다.</span>
		<script>
		function maxRestudy() {
			if(3700 < document.forms['form1']['restudy_day'].value) document.forms['form1']['restudy_day'] = 3700;
		}
		function setRestudy(el) {
			var f = document.forms['form1'];
			f['restudy_day'].value = el.checked ? f['restudy_day'].getAttribute("_cvalue") : "0";
			f['restudy_day'].disabled = !el.checked;
		}
		addEvent("onload", function() { 
			var f = document.forms['form1'];
			setRestudy(f['restudy_yn']); 
			f['restudy_day'].setAttribute("_cvalue", f['restudy_day'].value);
		});
		</script>
	</td>
</tr>
<tr>
	<td class="f_th01">학습제한 사용여부</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="limit_lesson_yn" value="Y" onclick="setLimitLesson(this);"></label>
		<span id="limitLessonArea" class="fontsmallthin">
			<input type="text" name="limit_lesson" size="4" class="ipt_right" _cvalue="{{limit_lesson}}"> 차시로 학습제한
		</span>
		<span class="desc01"> 1일당 학습할 수 있는 차시를 제한합니다.</span>
		<script>
		function setLimitLesson(el) {
			var f = document.forms['form1'];
			f['limit_lesson'].value = el.checked ? f['limit_lesson'].getAttribute("_cvalue") : "0";
			f['limit_lesson'].disabled = !el.checked;
		}
		addEvent("onload", function() { 
			var f = document.forms['form1'];
			setLimitLesson(f['limit_lesson_yn']); 
			f['limit_lesson'].setAttribute("_cvalue", f['limit_lesson'].value);
		});
		</script>
	</td>
</tr>
<tr>
	<td class="f_th01">배수제한 사용여부</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="limit_ratio_yn" value="Y" onclick="setLimitRatio(this);"></label>
		<span id="limitLessonArea" class="fontsmallthin">
			<input type="text" name="limit_ratio" size="4" class="ipt_right" _cvalue="{{limit_ratio}}" onblur="setDouble(this, 2);"> 배
		</span>
		<span class="desc01"> 강의시간에 비례하여 학습량을 제한합니다. 차시별로 개별 적용됩니다.</span>
		<script>
		function setLimitRatio(el) {
			var f = document.forms['form1'];
			f['limit_ratio'].value = el.checked ? f['limit_ratio'].getAttribute("_cvalue") : "0";
			f['limit_ratio'].disabled = !el.checked;
		}
		addEvent("onload", function() { 
			var f = document.forms['form1'];
			setLimitRatio(f['limit_ratio_yn']); 
			f['limit_ratio'].setAttribute("_cvalue", f['limit_ratio'].value);
		});
		</script>
	</td>
</tr>
<tr>
	<td class="f_th01">인원제한</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="limit_people_yn" value="Y" onclick="setLimitPeople(this);"></label>
		<span id="limitPeopleArea" class="fontsmallthin">
			<input type="text" name="limit_people" size="4" class="ipt_right" _cvalue="{{limit_people}}"> 명으로 인원제한
		</span>
		<span class="desc01"> 해당 과정의 수강인원을 제한합니다.</span>
		<script>
		function setLimitPeople(el) {
			var f = document.forms['form1'];
			f['limit_people'].value = el.checked ? f['limit_people'].getAttribute("_cvalue") : "0";
			f['limit_people'].disabled = !el.checked;
		}
		addEvent("onload", function() { 
			var f = document.forms['form1'];
			setLimitPeople(f['limit_people_yn']); 
			f['limit_people'].setAttribute("_cvalue", f['limit_people'].value);
		});
		</script>
	</td>
</tr>
<!--@if(playrate_block)-->
<tr>
	<td class="f_th01">배속재생 사용여부</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="playrate_yn" value="Y"></label>
		<div class="desc01" style="display:inline-block;"> 차시 영상의 배속재생을 사용합니다. <span style="color:red;">본 기능은 콜러스 플레이어를 사용하는 차시에 적용됩니다.</span></div>
	</td>
</tr>
<!--/if(playrate_block)-->
<tr>
	<td class="f_th01">탐색제한</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="limit_seek_yn" value="Y"></label>
		<span class="desc01"> 학습을 완료하지 않은 차시의 영상탐색을 제한합니다. 일부 환경에서는 적용되지 않을 수 있습니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">강의 순차학습 *</td>
	<td class="f_td01">
		<!--@if(lesson_order_block)-->
		<label class="switch01"><input type="checkbox" name="lesson_order_yn" value="Y"></label>
		<!--/if(lesson_order_block)-->
		<!--@nif(lesson_order_block)-->
		<input type="hidden" name="lesson_order_yn" value="{{lesson_order_yn}}">
		{{lesson_order_conv}}
		<!--/nif(lesson_order_block)-->
		<span class="desc01"> 순차적으로 학습을 해야 하는 경우 사용합니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">차시별 학습기간 *</td>
	<td class="f_td01">
		<!--@if(period_block)-->
		<label class="switch01"><input type="checkbox" name="period_yn" value="Y"></label>
		<!--/if(period_block)-->
		<!--@nif(period_block)-->
		<input type="hidden" name="period_yn" value="{{period_yn}}">
		{{period_yn_conv}}
		<!--/nif(period_block)-->
		<span class="desc01"> 차시별로 학습기간을 지정해야 할 경우 사용합니다.</span>
	</td>
</tr>
<tr>
	<td class="f_th01">과정모듈 사용여부</td>
	<td class="f_td01">
		<table class="l_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed">
		<colgroup>
		</colgroup>
		<tr align="center">
			<td class="l_th03">시험</td>
			<td class="l_th03">과제</td>
			<td class="l_th03">토론</td>
			<td class="l_th03">설문</td>
			<td class="l_th03">수강후기</td>
			<td class="l_th03">수강증</td>
			<td class="l_th03">수료증</td>
		</tr>
		<tr align="center">
			<td class="l_td01">
				<label class="switch01"><input type="checkbox" name="exam_yn" value="Y"></label>
			</td>
			<td class="l_td01">
				<label class="switch01"><input type="checkbox" name="homework_yn" value="Y"></label>
			</td>
			<td class="l_td01">
				<label class="switch01"><input type="checkbox" name="forum_yn" value="Y"></label>
			</td>
			<td class="l_td01">
				<label class="switch01"><input type="checkbox" name="survey_yn" value="Y"></label>
			</td>
			<td class="l_td01">
				<label class="switch01"><input type="checkbox" name="review_yn" value="Y"></label>
			</td>
			<td class="l_td01">
				<label class="switch01"><input type="checkbox" name="cert_course_yn" value="Y"></label>
			</td>
			<td class="l_td01">
				<label class="switch01"><input type="checkbox" name="cert_complete_yn" value="Y"></label>
			</td>
		</tr>
		</table>
		<!-- div class="desc01" style="margin-top:5px;"> 미사용시 노출이 되지 않습니다.	</div -->
	</td>
</tr>
<!--/nif(is_package)-->
<tr>
	<td class="f_th01">
		선행과정
		<div style="margin-top:3px;">
			<input type="button" class="btn_simp" value="선행과정 추가" onclick="openPreCourse()">
		</div>
	</td>
	<td class="f_td01">
		<table id="pgrid" class="l_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed">
		<colgroup>
		<col width="50">
		<col width="60">
		<col width="60">
		<col width="60">
		<col>
		<col width="180">
		<col width="60">
		</colgroup>
		<thead>
		<tr align="center">
			<td class="l_th03">No</td>
			<td class="l_th03">구분</td>
			<td class="l_th03">년도</td>
			<td class="l_th03">기수</td>
			<td class="l_th03">과정명</td>
			<td class="l_th03">학습기간</td>
			<td class="l_th03">삭제</td>
		</tr>
		</thead>
		<tbody>
		<!--@loop(pcourses)-->
		<tr class="l_tr_{{pcourses.ROW_CLASS}}" align="center">
			<td class="l_td01">
				{{pcourses.id}}
				<input type="hidden" name="precede_id" value="{{pcourses.id}}">
			</td>
			<td class="l_td01">{{pcourses.onoff_type_conv}}</td>
			<td class="l_td01">{{pcourses.year}}</td>
			<td class="l_td01">{{pcourses.step}}</td>
			<td class="l_td01" align="left" title="{{pcourses.course_nm}}">
				{{pcourses.course_nm_conv}}
			</td>
			<td class="l_td01">
				<!--@nif(pcourses.alltimes_block)-->
					{{pcourses.study_sdate_conv}} - {{pcourses.study_edate_conv}}
				<!--/nif(pcourses.alltimes_block)-->
				<!--@if(pcourses.alltimes_block)-->상시<!--/if(pcourses.alltimes_block)-->
			</td>
			<td class="l_td01"><input type="button" class="btn_smp" value="삭제" onclick="pgrid.del(this)"></td>
		</tr>
		<!--/loop(pcourses)-->
		</tbody>
		</table>
	</td>
</tr>
<!--@if(admin_block)-->
<tr>
	<td class="f_th01">
		과정담당자
		<div style="margin-top:3px;">
			<input type="button" class="btn_simp" value="과정담당자 추가" onclick="OpenWindow('../user/search_coursemanager.jsp', '_SC04', 660, 560);">
		</div>
	</td>
	<td class="f_td01">
		<div id="cmArea" class="picker_name">
			<span class="desc01">과정담당자를 추가하세요. 과정운영자는 자신의 담당과정만 관리할 수 있습니다.</span>
		</div>
	</td>
</tr>
<!--/if(admin_block)-->
</tbody>
</table>
</div>
<!--/if(modify)-->

<!--@if(modify)-->
<!--@nif(is_package)-->
<table class="c_tb01" cellpadding="0" cellspacing="0" style="margin-top:10px">
<tr>
	<td class="c_th01"><i class="fa fa-plus toggle"></i> 평가 정보</td>
	<td class="c_td01"></td>
</tr>
</table>

<div class="toggle-area toggle-hide">
<!--@nif(delete_block)-->
<div class="reminder01 yellow">
	<h1>이 과정에서 이미 학습을 시작한 수강생이 있습니다.</h1>
	이미 학습을 완료한 수강생에게도 새로운 배점비율을 반영하시려면 <a href="../management/result_list.jsp?cid={{cid}}"><strong>'과정운영 > 성적관리'</strong>에서 <strong>'전체성적재산정'</strong>을 실행하세요.</a>
</div>
<!--/nif(delete_block)-->

<table class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
<col width="150"><col><col width="150"><col>
<tr>
	<td class="f_th01">배점 비율</td>
	<td class="f_td01" colspan="3">
		<div class="desc01" style="padding-bottom:3px;">총점 100점 만점 기준으로 각 평가항목의 점수를 입력하세요</div>
		<table class="l_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
		<tr>
			<td class="l_th01">총점</td>
			<td class="l_th03">진도(출석)</td>
			<td class="l_th03">시험</td>
			<td class="l_th03">과제</td>
			<td class="l_th03">토론</td>
			<td class="l_th03">기타</td>
		</tr>
		<tr align="center">
			<td class="l_td01">
				<span id="totalAssignArea" style="font-weight:bold">100</span>점
			</td>
			<td class="l_td01">
				<input type="text" name="assign_progress" value="{{assign_progress}}" _cvalue="{{assign_progress}}"  class="ipt_right nf_100 sum_assign" maxlength="3" size="3"> 점(%)
			</td>
			<td class="l_td01">
				<input type="text" name="assign_exam" value="{{assign_exam}}" _cvalue="{{assign_exam}}" class="ipt_right nf_100 sum_assign" maxlength="3" size="3"> 점(%)
			</td>
			<td class="l_td01">
				<input type="text" name="assign_homework" value="{{assign_homework}}" _cvalue="{{assign_homework}}" class="ipt_right nf_100 sum_assign" maxlength="3" size="3"> 점(%)
			</td>
			<td class="l_td01">
				<input type="text" name="assign_forum" value="{{assign_forum}}" _cvalue="{{assign_forum}}" class="ipt_right nf_100 sum_assign" maxlength="3" size="3"> 점(%)
			</td>
			<td class="l_td01">
				<input type="text" name="assign_etc" value="{{assign_etc}}" _cvalue="{{assign_etc}}" class="ipt_right nf_100 sum_assign" maxlength="3" size="3"> 점(%)
			</td>
		</tr>
		</table>
		<script>
		function setTotalAssign() {
			var sum = 0;
			$(".sum_assign").each(function() {
				sum += $(this).val() * 1;
			});
			$("#totalAssignArea").html(sum).css("color", sum == 100 ? "#4C5BA9" : "#A94C4C");
		}
		addEvent("onload", function() {
			$(".sum_assign").on("blur", function() {
				setTotalAssign();
			})
			setTotalAssign();
		});
		</script>
	</td>
</tr>
<tr>
	<td class="f_th01">수료/과락 기준</td>
	<td class="f_td01" colspan="3">
		<div class="desc01" style="padding-bottom:3px;"> 각 항목의 수료기준을 100점(%) 기준으로 입력하세요. </div>
		<table class="l_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
		<tr>
			<td class="l_th01">총점</td>
			<td class="l_th03">진도(출석)율</td>
<!--			<td class="l_th03">시험</td>-->
<!--			<td class="l_th03">과제</td>-->
<!--			<td class="l_th03">토론</td>-->
<!--			<td class="l_th03">기타</td>-->
		</tr>
		<tr align="center">
			<td class="l_td01">
				<input type="hidden" name="limit_exam" value="{{limit_exam}}">
				<input type="hidden" name="limit_homework" value="{{limit_homework}}">
				<input type="hidden" name="limit_forum" value="{{limit_forum}}">
				<input type="hidden" name="limit_etc" value="{{limit_etc}}">
				
				<input type="text" name="limit_total_score" value="{{limit_total_score}}" class="ipt_right nf_100" maxlength="3" size="3"> 점 이상 / <span class="fontsmall">100점</span>
			</td>
			<td class="l_td01">
				<input type="text" name="limit_progress" value="{{limit_progress}}" class="ipt_right nf_100" maxlength="3" size="3"> % 이상 / <span class="fontsmall">100%</span>
			</td>
<!--			<td class="l_td01">-->
<!--				<input type="text" name="limit_exam" value="{{limit_exam}}" class="ipt_right nf_100" maxlength="3" size="3"> 점 이상 / <span class="fontsmall">100점</span>-->
<!--			</td>-->
<!--			<td class="l_td01">-->
<!--				<input type="text" name="limit_homework" value="{{limit_homework}}" class="ipt_right nf_100" maxlength="3" size="3"> 점 이상 / <span class="fontsmall">100점</span>-->
<!--			</td>-->
<!--			<td class="l_td01">-->
<!--				<input type="text" name="limit_forum" value="{{limit_forum}}" class="ipt_right nf_100" maxlength="3" size="3"> 점 이상 / <span class="fontsmall">100점</span>-->
<!--			</td>-->
<!--			<td class="l_td01">-->
<!--				<input type="text" name="limit_etc" value="{{limit_etc}}" class="ipt_right nf_100" maxlength="3" size="3"> 점 이상 / <span class="fontsmall">100점</span>-->
<!--			</td>-->
		</tr>
		</table>
	</td>
</tr>

<tr>
	<td class="f_th01">설문참여 필수여부</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="assign_survey_yn" value="Y"></label>
		<span class="desc01">수료기준에 설문참여여부를 포함합니다. 모든 설문에 참여해야 수료기준에 충족합니다.</span>
	</td>
	<td class="f_th01">설문참여 독려기능</td>
	<td class="f_td01">
		<label class="switch01"><input type="checkbox" name="push_survey_yn" value="Y"></label>
		<span class="desc01">진도기준을 충족한 수강생에게 설문참여를 독려합니다.</span>
	</td>
	<tr>
		<td class="f_th01">수료기준 노출여부</td>
		<td class="f_td01" colspan="3">
			<label class="switch01"><input type="checkbox" name="evaluation_yn" value="Y"></label>
			<span class="desc01">사용자단 과정상세 페이지에서 수료기준을 노출합니다.</span>
		</td>
	</tr>
</tr>
</table>
</div>

<table class="c_tb01" cellpadding="0" cellspacing="0" style="margin-top:10px">
	<tr>
		<td class="c_th01"><i class="fa fa-plus toggle"></i> 수료증 정보</td>
		<td class="c_td01"></td>
	</tr>
</table>

<div class="toggle-area toggle-hide">
<table id="evaluationArea" class="f_tb01" cellpadding="0" cellspacing="0" style="table-layout:fixed;">
	<col width="150"><col><col width="150"><col>
	<!--@if(template_block)-->
	<tr>
		<td class="f_th01">수료증 템플릿</td>
		<td class="f_td01" colspan="3">
			<select name="cert_template_id">
				<option value=""> - 사용하지않음 - </option>
				<!--@loop(template_list)-->
				<option value="{{template_list.id}}"> {{template_list.template_nm}} </option>
				<!--/loop(template_list)-->
			</select>
			<span class="desc01">수료증에 사용할 템플릿을 설정합니다. 지정하지 않으면 기본 수료증 양식을 사용합니다.</span>
		</td>
	</tr>
	<!--/if(template_block)-->
	<tr>
		<td class="f_th01">수료번호 사용여부</td>
		<td class="f_td01" colspan="3">
			<label class="switch01"><input type="checkbox" name="complete_no_yn" value="Y"></label>
			<span class="desc01" style="color:red;">하단에 설정한 수료번호 기준을 사용합니다. 지정하지 않으면 기본 수료번호 형식을 사용합니다.</span>
		</td>
	</tr>
	<tr>
		<td class="f_th01">수료번호 앞자리</td>
		<td class="f_td01" colspan="3">
			<input type="text" name="complete_prefix" size="30" maxlength="20">
			<span class="desc01">수료번호 앞자리를 입력합니다. 최대 20자까지 입력이 가능합니다.</span>
		</td>
	</tr>
	<tr>
		<td class="f_th01">수료번호 뒷자리수</td>
		<td class="f_td01" colspan="3">
			<input type="text" name="postfix_cnt" size="5" min="0" max="8">
			<span class="desc01">수료번호 뒷자릿수를 입력합니다. 최대 8자리까지 입력이 가능하며, 0을 입력하면 숫자가 그대로 부여됩니다.</span>
		</td>
	</tr>
	<tr>
		<td class="f_th01">뒷자리 번호방식</td>
		<td class="f_td01" colspan="3">
			<!--@loop(pf_types)-->
			<label><input type="radio" name="postfix_type" value="{{pf_types.id}}" class="ipt01">{{pf_types.value}}</label>
			<!--/loop(pf_types)-->
			<span class="desc01">뒷자리 번호방식을 선택합니다.</span>
		</td>
	</tr>
	<tr>
		<td class="f_th01">뒷자리 정렬방식</td>
		<td class="f_td01" colspan="3">
			<!--@loop(pf_ord_list)-->
			<label><input type="radio" name="postfix_ord" value="{{pf_ord_list.id}}" class="ipt01">{{pf_ord_list.value}}</label>
			<!--/loop(pf_ord_list)-->
			<span class="desc01" style="color:red;">뒷자리 번호방식을 '수강순번'으로 설정할 경우, 정렬방식을 선택합니다.</span>
		</td>
	</tr>
</table>
</div>

<script>
function setNumber($el, max) {
	if(!$el) return 0;
	if(!max) max = 0;
	var v = $el.val().replace(/,/g, "") * 1;
	v = !isNaN(v) ? v : 0;
	if(max > 0 && v > max) v = max;
	$el.val(number_format(v));
}

function setKeyup(max) {
	var numberClass = max ? ".nf_" + max : ".nf";
	$(numberClass).on("keyup", function() { 
		setNumber($(this), max);
	});
}

addEvent("onload", function() {
	setKeyup(100);
	setKeyup(1000);
});
</script>
<!--/nif(is_package)-->
<!--/if(modify)-->

<table class="b_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td>
		<button type="button" class="bttn2" onclick="location.href='course_list.jsp?{{list_query}}';">목록</button>
	</td>
	<td class="b_td01">
		<!--@nif(modify)-->
		<button type="submit" class="bttn2">등록</button>
		<!--/nif(modify)-->
		<!--@if(modify)-->
		<button type="submit" class="bttn2">수정</button>
		<button type="button" class="bttn2" onclick="BtnConfirmGo('삭제', 'course_delete.jsp?{{query}}');">삭제</button>
		<!--/if(modify)-->
	</td>
</tr>
</table>

</form>
{{form_script}}


<script language="JavaScript">
function goSubmit(f) {
	if(!validate(f)) return false;
	if(f['course_type'].value == "R") {
		var rsdate = f['request_sdate'].value;
		var redate = f['request_edate'].value;

		if(rsdate > redate) {
			alert("수강신청기간의 시작일과 마감일이 잘못 지정되었습니다.");
			f['request_sdate'].focus();
			return false;
		}

		if(f['onoff_type'].value != "P") {
			var ssdate = f['study_sdate'].value;
			var sedate = f['study_edate'].value;

			var cssdate = f['study_sdate'].getAttribute("_cvalue");
			var csedate = f['study_edate'].getAttribute("_cvalue");

			if(ssdate > sedate) {
				alert("학습기간의 시작일과 마감일이 잘못 지정되었습니다.");
				f['study_sdate'].focus();
				return false;
			}
			if(redate > sedate) {
				alert("수강신청기간의 마감일이 학습기간의 마감일을 벗어놨습니다.");
				f['request_sdate'].focus();
				return false;
			}
			
			<!--@if(modify)-->
			//기간변경된 경우
			if(f['user_date_yn'].checked && !confirm("기존 수강생의 학습기간도 같이 변경됩니다." + "\n\n변경하시겠습니까?")) {
				return false;
			}
			<!--/if(modify)-->
		}
	}

	<!--@if(modify)-->
	<!--@nif(is_package)-->
	//총점
	var assignProgress = f['assign_progress'].value * 1;
	var assignExam = f['assign_exam'].value * 1;
	var assignHomework = f['assign_homework'].value * 1;
	var assignForum = f['assign_forum'].value * 1;
	var assignEtc = f['assign_etc'].value * 1;
	var totalAssign = assignProgress + assignExam + assignHomework + assignForum + assignEtc;

	//배점
	if(totalAssign != 100) {
		alert("배점비율은 100점(%)이여야 합니다.");
		f['assign_progress'].focus();
		return false;
	}
	
	//확인-배점비율변경
	if(assignProgress != f['assign_progress'].getAttribute("_cvalue")
		|| assignExam != f['assign_exam'].getAttribute("_cvalue")
		|| assignHomework != f['assign_homework'].getAttribute("_cvalue")
		|| assignForum != f['assign_forum'].getAttribute("_cvalue")
		|| assignEtc != f['assign_etc'].getAttribute("_cvalue")
	) {
		if(!confirm(
			"배점비율 변경 시 기존 수강생의 성적을 재산정해야 합니다."
			+ "\n수정하시겠습니까?"
			+ "\n(취소시 원래대로 배점비율을 복원합니다.)"
		)) { 
			f['assign_progress'].value = f['assign_progress'].getAttribute("_cvalue");
			f['assign_exam'].value = f['assign_exam'].getAttribute("_cvalue");
			f['assign_homework'].value = f['assign_homework'].getAttribute("_cvalue");
			f['assign_forum'].value = f['assign_forum'].getAttribute("_cvalue");
			f['assign_etc'].value = f['assign_etc'].getAttribute("_cvalue");
			return false;
		}
	}
	<!--/nif(is_package)-->
	<!--/if(modify)-->
	return true;
}

function alertDisplay(el) {
	if(el.value == "Y") {
		alert("정상 선택시 해당 과정이 수강신청 페이지에 공개됩니다. \n반드시 운영정보/강의목차/평가정보`를 통하여 해당 정보를 확인 하시길 바랍니다.");
	}
}

function previewPrice() {
	//if(preview_list_price == undefined || preview_list_price == null) preview_list_price = number_format($("#list_price").val());
	//if(preview_price == undefined || preview_price == null) preview_price = number_format($("#price").val());
	var preview_list_price = number_format($("#list_price").val());
	var preview_price = number_format($("#price").val());

	$("#preview_list_price").html(preview_list_price + "원");
	$("#preview_price").html(preview_price == "0" ? "무료" : preview_price + "원");

	if(preview_list_price == "0") $("#preview_list_price").hide();
	else $("#preview_list_price").show();
}

<!--@if(modify)-->
var f = document.forms['form1'];

var pickerBook;
var pickerMajor; //담임강사

<!--@if(admin_block)-->
var pickerManager; //과정담당자
<!--/if(admin_block)-->

function setTarget() {
	var v = GetFormValue('form1', 'target_yn');
	document.getElementById("targetArea").style.display = v == "Y" ? "inline-block" : "none";
	document.getElementById("targetDesc").style.display = v == "Y" ? "none" : "inline";
}

function initPicker() {
	pickerBook = new MPicker("pickerBook");
	pickerBook.id = "bArea";
	pickerBook.names = new Array("book_id", "book_nm");
	pickerBook.removeMsg = "<span class='desc01'>교재도서를 추가하세요.</span>";

	pickerMajor = new MPicker("pickerMajor");
	pickerMajor.id = "mArea";
	pickerMajor.names = new Array("major_tutor_id", "tutor_nm");
	pickerMajor.removeMsg = "<span class='desc01'>담임강사를 추가하세요.</span>";

	pickerGroup = new MPicker("pickerGroup");
	pickerGroup.id = "gArea";
	pickerGroup.names = new Array("group_id", "group_nm");
	pickerGroup.removeMsg = "<span class='desc01'>그룹을 추가하세요.</span>";

	<!--@loop(books)-->
	pickerBook.set("{{books.book_id}}", "{{books.book_nm}}");
	<!--/loop(books)-->

	<!--@loop(tutors)-->
	pickerMajor.set("{{tutors.user_id}}", "{{tutors.tutor_nm}}");
	<!--/loop(tutors)-->

	<!--@loop(targets)-->
	pickerGroup.set("{{targets.group_id}}", "{{targets.group_nm}}");
	<!--/loop(targets)-->

	pickerBook.display("<span class='desc01'>도서를 추가하세요.</span>");
	pickerMajor.display("<span class='desc01'>담임강사를 추가하세요.</span>");
	pickerGroup.display("<span class='desc01'>그룹을 추가하세요.</span>");

	<!--@if(admin_block)-->
	pickerManager = new MPicker("pickerManager");
	pickerManager.id = "cmArea";
	pickerManager.names = new Array("manager_id", "manager_nm");
	pickerManager.removeMsg = "<span class='desc01'>과정담당자를 추가하세요. 과정운영자는 자신의 담당과정만 관리할 수 있습니다.</span>";

	<!--@loop(managers)-->
	pickerManager.set("{{managers.user_id}}", "{{managers.manager_nm}}({{managers.login_id}})");
	<!--/loop(managers)-->

	pickerManager.display("<span class='desc01'>과정담당자를 추가하세요. 과정운영자는 자신의 담당과정만 관리할 수 있습니다.</span>");
	<!--/if(admin_block)-->

}

function delBefore() {
	f['before_course_id'].value = '';
	f['before_course_nm'].value = '';
}

function delSample() {
	f['sample_lesson_id'].value = '';
	f['sample_lesson_nm'].value = '';
}

//선행
var pgrid = new MGRID("pgrid");
pgrid.rowActiveColor = "#F4FAFF";
pgrid.cellAligns = new Array("center", "center", "center", "center",  "left", "center", "center");
pgrid.setActiveColor(-1);

function openPreCourse() {
	var idx = GetFormValue("form1", "precede_id") ? GetFormValue("form1", "precede_id") : "";
	OpenWindow('../course/course_select.jsp?mode=precede&cid={{cid}}&idx=' + idx, '_CCS02', 800, 700);
}
<!--/if(modify)-->

//addEvent("onload", setTarget);
//addEvent("onload", initPicker);
$(document).ready(function() {
	<!--@if(modify)-->
	setTarget();
	initPicker();
	<!--/if(modify)-->
	previewPrice();
});

function setDouble(el, len) {
	var v = parseFloat(el.value);
	if(isNaN(v)) v = 1;
	el.value = v.toFixed(len);
}

$(document).ready(function() {
	<!--@if(modify)-->
	$(".toggle").closest("td").css("cursor", "pointer");

	$(".toggle").closest("table").click(function() {
		$(this).find(".toggle:first-child").toggleClass("fa-plus").toggleClass("fa-minus");
		$(this).next(".toggle-area").toggle(100);
	});

	$(".fa-plus").closest("table").next(".toggle-area").toggle(100);
	<!--/if(modify)-->
});
</script>