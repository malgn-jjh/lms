<style type="text/css">
.sp { cursor:pointer; float:left; font-family:dotum; font-size:12px; list-style:none; width:19px; height:19px; }
.sp2 { cursor:pointer; float:left; font-family:dotum; font-size:12px; list-style:none; width:154px; height:20px; }
.sp a { color:black; }
</style>

<form name="form1" method="post" target="sysfrm" onsubmit="return goSubmit(this);">
<table class="c_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="c_th01">{{p_title}} <!--@if(modify)-->수정<!--/if(modify)--><!--@nif(modify)-->등록<!--/nif(modify)--></td>
</tr>
</table>
<table class="f_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="f_th01">발송구분 *</td>
	<td class="f_td01" id="ynArea">
		<label><input type="checkbox" value="Y" name="sms_yn" class="ipt01"> SMS </label>&nbsp;
		<label><input type="checkbox" value="Y" name="mail_yn" class="ipt01"> 이메일 </label>&nbsp;
		<label><input type="checkbox" value="Y" name="message_yn" class="ipt01"> 쪽지 </label>&nbsp;
	</td>
</tr>
<tr>
	<td class="f_th01">발송타입 *</td>
	<td class="f_td01">
		<!--@loop(types)-->
		<label><input type="radio" name="send_type" class="ipt01" value="{{types.id}}"> {{types.name}} </label>&nbsp;&nbsp;
		<!--/loop(types)-->
	</td>
</tr>
<tr>
	<td class="f_th01">제목 *</td>
	<td class="f_td01"><input type="text" name="subject" style="width:80%;" /></td>
</tr>
<tr>
	<td class="f_th01">내용 *</td>
	<td class="f_td01">
		<table  cellpadding="0" cellspacing="0">
		<tr>
			<td style="padding-left:5px" valign="top">
				<script>
				function checkbyte() {
					var el = document.forms['form1']['content'];
					var msg = el.value;
					var byte = 0;
					for(var i=0; i<msg.length; i++) {
						var esc = escape(msg.charAt(i));
						if(esc.length >= 6 || esc == "%0A") byte++;
						byte++;
						if(byte > 80) {
							//alert("80byte를 넘을 수 없습니다.");
							//el.value = msg.substring(0, i);
							//break;
						}
					}
					msg = el.value;
					byte = 0;
					for(var i=0; i<msg.length; i++) {
						var esc = escape(msg.charAt(i));
						if(esc.length >= 6 || esc == "%0A") byte++;
						byte++;
					}
					document.getElementById("byte").innerHTML = byte;
				}
				</script>
				<div  style="width:144px;">
				<div style="height:31px;"><img src="../html/images/admin/common/phone_top1.gif" alt="phone" usemap="#clearCont"></div>
				<map name="clearCont">
					<area shape="RECT" coords="50, 10, 100, 25" href="javascript:clearContent();" onfocus="blur()" title="메세지를 초기화 합니다.">
				</map>
				<div style="height:15px;text-align:center;padding-top:3px;background:url(../html/images/admin/common/phone_top2.gif) no-repeat top">
					<span id="byte">0</span> Byte
				</div>
				<div style="background:url(../html/images/admin/common/phone_main1.gif) no-repeat top;height:85px;">
					<table cellpadding="0" cellspacing="0">
						<tr>
							<td width="28"></td>
							<td width="99">		
								<textarea name="content" style="margin:2px;border-width:0px;overflow-y:auto;background-color:transparent;width:99px;height:81px;word-wrap:break-word;" onkeyup="checkbyte();" id="tgtContent">{{content}}</textarea>
							</td>
							<td width="28"></td>
						</tr>
					</table>
				</div>
				<div style="height:20px;"><img src="../html/images/admin/common/phone_bottom.gif" alt="phone"></div>

			</td>
			<td valign="top" style="padding:4px 5px 5px 5px;">
				<ul style="float:left;width:315px;background:#f4f4f4;padding:15px 2px 20px 10px;">
					<!--@loop(names)-->
					<li class="sp2"><a href="javascript:setSubject('${{names.id}}$')"><font color="black">{{names.name}} ({{names.id}})</font></a></li>
					<!--/loop(names)-->
				</ul>
			</td>
			<td valign="top" style="padding:4px 5px 5px 3px;">
				<ul id="spec" style="margin:0px 0 0 0;padding:0px;float:left;width:172px;height:140px;background:#f4f4f4;padding:10px 0 0 2px;">
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">★</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">☆</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">☎</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">☏</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">☜</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">☞</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">※</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♥</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♡</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♣</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♠</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♤</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♧</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♨</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">ㆀ</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♩</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♪</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">♬</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">■</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">□</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▣</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▤</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▦</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▨</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▩</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▒</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▲</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">△</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▶</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▷</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▼</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">▽</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◀</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◁</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◆</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◇</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◈</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">●</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">○</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◎</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">⊙</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◐</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">◑</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">←</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">↑</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">→</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">↓</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">⇒</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">§</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">Ø</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∀</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∃</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∏</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∞</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∧</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∪</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∬</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∴</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">∽</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">≠</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">⊃</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">￠</a></li>
					<li class="sp"><a href="javascript:;" onclick="setSpecial(this)">￥</a></li>
				</ul>
			</td>
		</tr>
		</table>
	</td>
</tr>
<tr>
	<td class="f_th01">상태 *</td>
	<td class="f_td01">
		<!--@loop(status_list)-->
		<label><input type="radio" name="status" value="{{status_list.id}}" class="ipt01"> {{status_list.name}} </label>&nbsp;&nbsp;
		<!--/loop(status_list)-->
	</td>
</tr>
</table>

<table class="b_tb01" cellpadding="0" cellspacing="0">
<tr>
	<td class="b_th01"><button type="button" class="bttn2" onclick="location.href='auto_list.jsp';">목록</button></td>
	<td class="b_td01">
		<!--@nif(modify)-->
		<button type="submit" class="bttn2">등록</button>
		<!--/nif(modify)-->

		<!--@if(modify)-->
		<button type="submit" class="bttn2">수정</button>
		<button type="button" class="bttn2" onclick="BtnConfirmGo('삭제', 'auto_delete.jsp?idx={{id}}');">삭제</button>
		<!--/if(modify)-->
	</td>
</tr>
</table>
</form>
{{form_script}}

<script language="JavaScript">
function goSubmit(f) {
	if(!validate(f)) return false;
	var els = document.getElementById("ynArea").getElementsByTagName("input");
	var flag = false;
	for(var i=0,max=els.length; i<max; i++) {
		if(els[i].checked) { flag = true; break; }
	}
	if(!flag) { alert("발송구분을 선택하세요."); return false; }
}

function setSpecial(tgt) {
	var v = tgt.innerHTML.replace(/&lt;/g, "<").replace(/&gt;/g, ">");
	var el = document.getElementById("tgtContent");
	el.focus();
	if(document.selection) {
		document.selection.createRange().text = v;
	} else if(document.getSelection) {
		var pos = (el.value.substring(0, el.selectionStart) + v).length;
		el.value = el.value.substring(0, el.selectionStart) + v + el.value.substring(el.selectionEnd, el.value.length);
		el.selectionStart = el.selectionEnd = pos;
	}
	checkbyte();
	el.focus();
}        

function setSubject(vl) {
	var el = document.getElementById("tgtContent");
	el.focus();
	if(document.selection) {
		document.selection.createRange().text = vl;
	} else if(document.getSelection) {
		var pos = (el.value.substring(0, el.selectionStart) + vl).length;
		el.value = el.value.substring(0, el.selectionStart) + vl + el.value.substring(el.selectionEnd, el.value.length);
		el.selectionStart = el.selectionEnd = pos;
	}
	checkbyte();
	el.focus();
}
function clearContent() {
	document.forms['form1']['content'].value = "";
	document.getElementById("byte").innerHTML = 0;
	document.forms['form1']['content'].focus();
}
addEvent("onload", checkbyte)
</script>