<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, target-densitydpi=medium-dpi" />
<title>{{lesson_nm}}</title>
<script language="javascript" type="text/javascript" charset="utf-8" src="{{SYS_COMMON_CDN}}/common/js/jquery-1.12.3.min.js"></script>
<script language="javascript" type="text/javascript" charset="utf-8" src="{{SYS_COMMON_CDN}}/common/js/common.js?t={{SYS_TODAY}}"></script>
<script type="text/javascript" src="https://chat.malgnlms.com/scripts/minitalk.js?t={{SYS_NOW}}" charset="UTF-8"></script>
<style>
    html, body {width: 100%; height: 100%; margin: 0; padding: 0; color: #ffffff; font-size: 24px; font-weight: bold; text-align: center; background-color: #000000; overflow: hidden;}
    * {box-sizing: border-box;}
    #wrapper {display: table; display: none; width: 100%; height: 100%;}
    #contents {display: table-cell; vertical-align: middle; width: 100%; height: 100%;}

    #contentArea {position:relative; height:100%;}

    #playerArea { <!--@if(chat_block)--> margin-right:400px; <!--/if(chat_block)--> height:100%; overflow:hidden; position:relative; z-index:2;}
    #player {width:100%; height:100%; overflow:hidden;}

    <!--@if(chat_block)-->
    #chatArea {position:absolute; top:0; right:0; width:400px; height:100%; overflow:hidden; z-index:1;}
    #chatArea > div {height:100% !important;}

    @media only screen and (max-width: 1000px) {
        #chatArea {width:200px;}
        #playerArea {margin-right:200px;}
    }

    @media only screen and (max-width: 800px) {
        #chatArea {top:0; right:initial; width:100%;}
        #playerArea {margin-right:0;}
    }
    <!--/if(chat_block)-->

</style>

</head>
<body>
<!--@nif(zoom_block)-->
<div id="contentArea">
<div id="playerArea">
    <iframe src="{{start_url}}" name="player" id="player" frameborder="0" scrolling="no" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe>
</div>
<!--@if(chat_block)-->
<div id="chatArea">
    <script type="text/javascript">
        var talk = new Minitalk({
            id:"chat{{SYS_NOW}}",
            channel:'{{channel}}',
            width:"100%",
            height:"100%",
            dateFormat:"YYYY.MM.DD HH:mm:ss",
            templet:"default",
            logCount:0,
            toolType:"text",
            usermenus:["configs"],
            tabType:"vertical",
            viewConnectMessage:false,
            viewUserNotificationLimit:9,
            usercode:"{{nickname}}"
        });
    </script>
</div>
<!--/if(chat_block)-->
</div>
<!--/nif(zoom_block)-->

<!--@if(zoom_block)-->
<div id="wrapper">
<div id="contents">학습창을 불러오는 중입니다.<br>잠시만 기다려주세요.</div>
</div>
<script>
$(document).ready(function() {
    location.href = '{{start_url}}';
});
</script>
<!--/if(zoom_block)-->

<script language="JavaScript">
var lastTime = {{last_time}};
var currTime = {{curr_time}};
var chapter = '{{chapter}}';
var cuid = '{{cuid}}';
var lid = '{{lid}}';
</script>
<script src="{{SYS_COMMON_CDN}}/common/js/extplayer.js"></script>

<script>
$(document).ready(function() {
    <!--@if(chat_block)-->
    resizeLive();
    <!--/if(chat_block)-->

});
$(window).resize(function() {
    <!--@if(chat_block)-->
    resizeLive();
    <!--/if(chat_block)-->
});

function resizeLive() {
    var width = $("body").innerWidth();
    //if(1000 > width && window.innerHeight > window.innerWidth) {
    if(800 > width) {
        var height = width / 16 * 9;
        $("#playerArea").height(height);
        $("#chatArea").css("padding-top", height + "px")
        //$(".chatArea").css("width", "100%").css("height", "initial !important");
    } else {
        $("#playerArea").height("100%");
        $("#chatArea").css("padding-top", "0")
        //$(".chatArea").css("width", "100%").css("height", "100%");
    }
}
</script>

</body>
</html>